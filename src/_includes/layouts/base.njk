<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% if title %}{{ title }} | {{ site.name }}{% else %}{{ site.name }}{% endif %}</title>
  
  <meta name="description" content="{{ description or site.description }}">
  <meta name="author" content="{{ author or site.publisher.name }}">
  <link rel="canonical" href="{{ site.url }}{{ page.url }}">
  
  <meta property="og:site_name" content="{{ site.name }}">
  <meta property="og:type" content="{{ ogType or 'website' }}">
  <meta property="og:title" content="{{ title or site.name }}">
  <meta property="og:description" content="{{ description or site.description }}">
  <meta property="og:url" content="{{ site.url }}{{ page.url }}">
  <meta property="og:image" content="{{ ogImage or site.defaultImage }}">
  
  <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin />
  <link href="https://fonts.googleapis.com/css2?display=swap&family=Newsreader:wght@400;500;700;800&family=Noto+Sans:wght@400;500;700;900" rel="stylesheet" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { 'newsreader': ['Newsreader', 'serif'], 'noto': ['"Noto Sans"', 'sans-serif'] },
          colors: { accent: { 500: '#00E5FF', 600: '#00B8D4' }, magenta: { 500: '#FF2DAF' } }
        }
      }
    }
  </script>

  <script>
    (function() {
      // Verifica preferencia guardada o del sistema
      if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
    })();
  </script>
</head>
<body class="bg-white text-slate-900 dark:bg-slate-950 dark:text-slate-100 min-h-screen flex flex-col font-noto transition-colors duration-300">

  {% if not hideHeader %}
    {% include "partials/header.njk" %}
  {% endif %}

  <main id="content" class="flex-1">
    {{ content | safe }}
  </main>

  {% if not hideFooter %}
    {% include "partials/footer-nav.njk" %}
  {% endif %}

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "{{ site.name }}",
    "url": "{{ site.url }}"
  }
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Buscamos cualquier botÃ³n que tenga el ID 'toggle-theme'
      const themeBtn = document.getElementById('toggle-theme');
      
      if (themeBtn) {
        themeBtn.addEventListener('click', () => {
          const html = document.documentElement;
          if (html.classList.contains('dark')) {
            html.classList.remove('dark');
            localStorage.theme = 'light';
          } else {
            html.classList.add('dark');
            localStorage.theme = 'dark';
          }
        });
      }
    });
  </script>
</body>
</html>